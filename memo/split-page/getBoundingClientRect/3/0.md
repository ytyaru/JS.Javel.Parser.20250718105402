# 分割

　簡易形式テキストを分割して画面内に収まる単位で`<div class="page">`要素を生成する。

データ|概要
-----|----
JavelText|見出し、本文、ルビなどの簡易構文。二連続改行を一block要素とするString(文字列)。
TextBlock|一block要素単位のString配列
BlockElement|一block要素単位のHTMLElement(`<h1>`〜`<h6>`,`<hr>`,`<br>`,`<p>`)
InlineElement|一inline要素単位のHTMLElement(`<ruby>`,`<em>`,`<mark>`,`<span>`,`<div>`)
p|一block要素単位のうちp要素のみ（ページをまたいで分割する要素）
p.childNodes|p内子要素(`TextNode`,`<ruby>`,`<em>`,`<mark>`,`<span>`,`<div>`)
TextNode|p内TextNode
TextNode.Sentences|TextNode内にある文の配列
Sentences.Words|文の中にある語の配列
Word.Graphemes|語の中にある字の配列

## 一括

　Javelテキストから一括変換する。高速だが長文になると長期フリーズする。

```javascript
const parser = new JavelParser();
parser.text = 'Javel原稿';
parser.els; // [Element, ...]
const splitter = new PageSplitter(Dom.q('[name="book"]'));
splitter.split(parser.els);
```

## TextBlock単位

　JavelテキストをTextBlock単位で変換する。低速だが長文でもフリーズしにくい。

```javascript
const parser = new JavelParser();
const splitter = new PageSplitter({
  root: Dom.q('[name="book"]'),
  createdPage: (page, pageNum)=>pages.length, 
  finished: (pages)=>pages.length,
});
for (let el of parser.generate('Javel原稿')) {
  splitter.addElement(el);
}
```


# Javel Viewer

　Javel Viewerは日本語小説を本のようにディスプレイで閲覧できるアプリ。

# 工程

1. ページ設定する
2. 原稿を渡す
3. 表示する
4. 閲覧する（ページ遷移／白黒切替／キャッシュ付き原稿DL）

## ページ・原稿の設定

```
ブラウザ
[URL: https://javel.viewer?type=txt&data=base64url&writingMode=v&size=1920,1080&fontSize=...]
```

```
Javel Viewer  ？

[閲覧する]  ☑原稿ファイルがDnDされたら自動的に閲覧する

原稿

  [URL入力]  ☑入力ファイルやテキストに応じて自動生成する  
  [ファイル選択]
  原稿ファイルをドラッグ＆ドロップ
  [textarea]

ページ設定

  ☑原稿にページ設定があればそちらを優先する

  画面サイズ[1920]x[1080]  [全画面化／全画面解除]  ☑現在のウインドウサイズに合わせる

  書字方向[縦書き▼]
           横書き
  font-face:
    見出し: [ファイル選択]
    本文:   [ファイル選択]

  タイポグラフィ　☑おまかせ
    column-count: [2↕]
    column-gap    [2↕]em

    [32↕]字/行
    font-size:      16px
    letter-spacing: [0.05]em
    line-height:    [1.75]em

```

```
font-face
  heading: ''
  paragraph: ''
```

## 表示・閲覧

　閲覧時に変更できるのは白黒と補足情報の表示設定のみ。

### 横書き

```
作品タイトル             段組み

　本文内容。             右側のページ内容。

-----------------------------------------------
⚙  00:00  白／黒  前  1/5≦  次   作品タイトル
```

### 縦書き

```
                                         本  作
                                         文  品
                                         内  タ
                                         容  イ
                                         。  ト
                                             ル
-----------------------------------------------
作品タイトル  次  1/5≦  前   白／黒  00:00  ⚙
```

```
-------------------------------------------------
⚙  00:00  次  1/5≦  前  白／黒  作品タイトル ⬇
```

### 補足情報

　閲覧画面下にある部分。

　基本的には非表示である。画面中央付近をクリック（タップ）すると本文を隠して表示される。同じ操作で補足情報を隠せる。

　本文の書字方向により表示位置が変わる。

* 作品タイトル
* ノンブル（現在ページ番号／全体ページ数）
* 前後（ページ移動ボタン）
* 白黒切替ボタン
* 現在時刻
* 他⚙
    * DL（ダウンロード）
        * 原稿（閲覧状態に応じた以下メタデータ付き）
            * ページ設定データ付き（ページ分割に必要な画面サイズやフォント等）
            * ページ分割キャッシュ付き（次回計算なくページ分割する。計算完了ならisLoadedフラグを真にする）
            * 栞付き（現在閲覧中ページ数。次回最初に表示する）
        * HTML（ページ分割済み固定HTML,CSS,JSを一ファイルにまとめたもの。画像はBase64にする）
            * 静的
                * 複数ファイルをフォルダ分けしてtgz圧縮したファイル一つ
                * 複数ファイルをフォルダ分けしたファイルやフォルダ（Chrome標準機能にある）
                * 単一HTML化したtgz圧縮ファイル一つ
                * 単一HTML化したファイル一つ
            * 動的
                * 原稿＋Viewerアプリコード（ページ分割キャッシュに応じて分割する）
                * 原稿＋Viewerアプリコード（現在の画面サイズ等に応じておまかせ表示）


No|工程|概要
--|----|----
1|ページ設定する|
2|原稿を渡す|
3|表示する|
4|閲覧する|（ページ遷移／白黒切替／キャッシュ付き原稿DL）


### DL 動的HTMLファイル

　Javel原稿を`<pre>`か`<textarea>`要素内に入れる。それを読み取り、PageConfigと合わせ、Page分割キャッシュを参照し、ページ分割処理する。

```html
<pre>Javel原稿</pre>
```
```html
<textarea>Javel原稿</textarea>
```

* 原稿
* PageConfig（画面サイズ（一ページあたりのサイズ）、フォントサイズ、書字方向等）
* Page分割キャッシュ（原稿のbyte位置を記録した配列。ここでページ分割する）
* Static Page 分割処理（キャッシュで分割するだけの簡単な処理）

　キャッシュを複数持たせれば、書字方向を変えたり、フォントサイズを変更することも可能。ただしキャッシュサイズが肥大化する。

## ？  help

```
# Javel

　Javel Viewerは日本語小説を本のように閲覧するアプリです。

　Javelは『Japanese』と『Novel』を掛け合わせた造語です。日本語の小説に特化しました。

　小説の執筆はテキストエディタで可能です。Markdownや小説投稿サイト（カクヨム）に類似したJavel記法で執筆します。このテキストファイル(原稿)を渡して、本のようなHTMLを生成します。

　Javel Viewerの特徴は本のように閲覧できることです。既存の小説投稿サイトはスクロール表示であり画面の境目で文字が見切れてしまいます。読みづらく不満だったので、本のように文字が見きれぬよう閲覧できるアプリJavelを作りました。

　Javelはオフラインで動作するブラウザアプリです。HTML,CSS,JavaScriptで実装されており、ダウンロードすればオフラインでも使用できます。

　JavelはWEB上にアップロードして動作させることも可能です。DEMOサイトでも好きな原稿を渡して本のように閲覧できるので、ぜひお試しください。

## 主旨

　Javelは誰でも簡単にすぐ小説を執筆＆閲覧することが目的です。作家や読者のユーザ体験を最優先します。

　既存のサービスやアプリは運営者や開発者が営利目的を果たすのが最優先であり、利用者《ユーザ》に余計な負担《コスト》や危険《リスク》を強いています。それに不満を持ったためJavelを作成・公開しました。

<!--
　Javelは小説の執筆＆読書だけに集中できるアプリです。既存の小説投稿サイトやスマホアプリは、本来の目的である執筆や読書を、営利目的の手段にしているせいで、様々な面倒事が絡んで来ます。その負担《コスト》や危険《リスク》は日々増大し、看過できないレベルになりました。これを回避したくてJavelを作りました。
-->

　小説閲覧スマホアプリは利用できない場合が多いです。特定のブランド、OS、デバイスを所持し、かつ特定のブランドが運営する特定のサイトにアクセスし、かつ特定のOSバージョン以上でなければ、アプリをダウンロードすることも、動作させ利用することもできません。提供側が利益を独占したくて顧客を囲い込むべく行った戦略なのでしょうが、そのせいで移植性の低いアプリになり、利用できない人々や場面が増えています。利用できないアプリに価値はありません。

　アプリは誰もが利用できるべきです。あらゆるデバイスで誰もが利用できるクロスプラットフォームなアプリが欲しかったのです。故にJavelはブラウザアプリで実装しました。

　小説投稿サイトの利用にはアカウント必須で、メールアドレスが必要で、それにはSNS認証や生体認証といった個人情報の提供が事実上必須になっている状況です(2025年現在)。小説を書くのに不要なはずの個人情報提供は社会的リスクを無駄に増大させます。これを回避したくてJavelを作りました。

　また、毎回ログインしたり、利用規約やサービス変更・改悪の対応などの煩わしさ、五輪汚職や性犯罪、反社活動する国や企業へ加担させられるなどといった自分の意志に反することをせずとも簡単に小説を執筆＆読書できる環境が欲しかったのです。

<!--
　既存のサービスやアプリは、小説の執筆＆読書とは関係ない負担《コスト》や危険《リスク》や束縛《バインド》があまりに多すぎます。それらはすべて提供側が利益を得るために生じました。現在の人類社会は資本主義のもとで運用されているため利益追求は当然です。そして利益とは、利益を得る者を生み、損失を被る者を生みます。既存のサービスやアプリはあくまで提供者の利益を追求したものであり、利用者（作家や読者）の利益を追求したものではありません。
-->

　既存のサービスやアプリは、小説の執筆＆読書とは関係ない負担《コスト》や危険《リスク》や束縛《バインド》があまりに多すぎます。それらはすべて提供側が利益を得るために生じました。現在の人類社会は資本主義のもとで運用されているため利益追求は当然です。しかし利益を得る者がいれば、逆に奪われ損失を被る者もいます。それが利用者です。

立場|結果
----|----
提供者|利益を得る
利用者|損失を被る

　既存のサービスやアプリはあくまで提供者の利益を追求したものであり、利用者（作家や読者）の利益を追求したものではありません。当然です。提供者は慈善事業者ではなく、自身の利益を追求する組織ですから。故に彼らから利用者の利益を追求したサービスやアプリが提供されることは永久にありません。

　もちろん利用者が得られるメリットもあるでしょう。たとえば小説投稿サイトではHTTPSサーバを立てずとも小説を公開できます。また、プロの作家としてデビューする道が開けます。金銭の授受が生じる場合もあるでしょう。

　プロの作家になりたい人《ワナビ》なら負担《コスト》や危険《リスク》も承知できるかもしれません。でも、趣味で読み書きしたいだけの素人《パンピー》・｜同好の士《オタク》にとっては看過できないほど大きい負担《コスト》と危険《リスク》です。

　素人《パンピー》にとって丁度いいサービスやアプリはありません。一体だれが見ず知らずの他人である素人のためカネにならないサービスやアプリを作るというのでしょうか。誰も作らなくて当然です。開発コストだってタダではないのです。

　だから自分で作りました。素人《パンピー》な作家と読者のためのアプリJavelを。

## 自由

　自分のやりたいことは自分でやる。誰もがこれをやれば自然と世の中は善くなっていく。私はそう信じています。なのでJavelはオープンソースにしました。

　きっと誰かが改良してくれるでしょう。コードをフォークして改造したり、コードの一部をパクってもっと良いアプリを別の名前で公開したり。そうなれば私にとっても、より便利なものが使える嬉しい状況になります。それこそが私の利益だと考えます。

　公益よりも私益を求めた結果、貧しくなったのが現代社会です。そんな人類を心から軽蔑します。しかし生物は利己にもとづくものです。利己は回避不能な絶対法則です。故に私は私にできる範囲で自分の中にある利己と戦いました。素直に利己を見つめて求めるものを欲し、されど他人に実現する負担を背負わせることなく、自身の手で作りました。すべてが自分由来です。このとき私は人生における究極の理想、自由へと至ったのです。

　自由とは、自らに由ること。誰かに頼るでもなく、誰かに強いるでもなく、誰かから奪うでもなく、誰かに求められたからでもなく、自分で自分の欲しい物事を追求し実現することが自由なのです。私は自由意志によりJavelを作成・公開しました。

　Javelの公開で、私は一定度の満足を得ました。無から有を創造できた喜び。苦を楽に、悲しみを喜びに、悔しさを達成感に塗り替えられた喜び。好きなことをやり抜いた喜び。自分の正義を貫き通せた喜び。理想を形にできた喜び。それらは自信と誇りになりました。

　ああ、ものづくりって何て楽しいのだろう。これだからプログラミングは辞められません。

　願わくば誰かのちょっとした楽しみや喜びに貢献できたら、これ以上ない幸福です。この苦しみに満ちた人生の中で、待っていてもやって来ない小さな楽しみや喜びを生み出すのに役立てたなら、こんなに嬉しいことはありません。屈服するしかない苦痛の人生に対して勝鬨をあげられるでしょう。言ってやりたいのです、不幸に、苦痛に、悲しみと絶望に「ざまぁみろ」と。壊し奪うことでしか生きられない非情な現実に「やってやったぜ」と宣ってやりたいのです。人生は自由を勝ち取る戦いです。Javelで絶望の大海に一石を投じられたら嬉しいです。

　まだまだ欲しい機能、やりたいことはありますが、残りの人生を掛けても終わらないでしょう。なのでオープンソースで公開し、人々に託します。自分は自分にできることをやりました。精一杯やったら完璧でなくとも一定度の満足感は得られるようです。すると次の世代に託せる喜びも理解できるようになりました。自己満足は次のステージへ進むために必要だったのです。

　きっと物書きもプログラミングも楽しむ人は大勢いるでしょう。そして彼らは今よりもっと楽しくて自分や他人が喜ぶものを作ってくれると信じています。生物には利己があり、利己は己の理想を追求する原動力ですから。

　私は人が理想に手を伸ばすことに壁を作りたくありません。カネを払わねば得られないとか、スマホを持っていないと得られないとか、無用な壁はすべて取り払いたいのです。

　いつの時代も同好の士が新しい時代を切り開いてきました。多数派から理解を得られぬほど常軌を逸した熱量を持ったオタクこそが時代を動かし世界に日本の価値と文化を広めました。大衆はそれをバカにしましたが、やがて時代が追いついて常識となりました。かつてネットがアングラだった2ch時代からいくつもの新しいコンテンツが産まれてくるのを見ました。そして一般化すると大企業がパクるなどして腐敗し熱が冷めて白けました。人が産み出すことこそが真価であり価値あることですが、それを略奪することは破壊であり人類の価値に損害を与える行為です。人類が経済社会によって衰退したのは、人から奪うことに傾倒した結果でしょう。私は生み出せる側の人間でありたいです。自ら楽しんで誰かの喜びと価値すら生み出せる人間でありたいです。

　人が喜びを追求するのに権利や資格を要する環境などぶっ壊すべきです。利己は、人から奪うためではなく、人に与えるために振るうべきです。人にはそれができると信じています。浅ましい欲を超越した先にこそ、人の夢と理想がある。夢を追い続けるからこそ苦痛の人生を楽しめる。救いは自分たちの手で作り出せる。途方もなく積み重ねることで、いつか実現できるはず。それが究極の喜びであり善であり人生の理想像です。私がその実現を見ることはないでしょうが、あとは託しました。







　小説が読み書きしたいなら、それを願う自分自身が、それを実現せねばなりません。それこそが唯一の解決手段です。違う願いを持っている人にやらせてもコレジャナイ感に満ちた何かができるだけです。私はそんな偽物では満足できません。





　提供側は探さずとも面白い作品が次々と投稿される

プロの作家を

　プロの作家

　しかしそれはあくまで提供者である出版企業にとって自身の利益になるからやっているのです。


　ただ、それらの利益よりも負担や危険のほうが大きいというのが私の見解です。別にプロの作家を目指している訳ではないワナビが、それでも本のように閲覧しやすい小説を読み書きしたい。そんな立場の人にとって、ちょうどいいサービスやアプリはありません。一体だれがカネにならないサービスやアプリを作るというのでしょうか。誰も作ってくれなくて当然です。開発コストだってタダではないのです。だから私が自分で作りました。

　自分のやりたいことは自分でやる。誰もがこれをやれば自然と世の中は善くなっていく。私はそう信じています。なのでJavelはオープンソースにしました。きっと誰かが改良してくれるでしょう。コードをフォークして改造したり、コードの一部をパクってもっと良いアプリを別の名前で公開したり。そうなれば私にとっても、より便利なものが使える嬉しい状況になります。

　小説が読み書きしたいなら、それを願う自分自身が、それを実現せねばなりません。それこそが唯一の解決手段です。違う願いを持っている人にやらせてもコレジャナイ感に満ちた何かができるだけです。私はそんな偽物では満足できません。




自分にとっての願いは、きっと誰かに


を被ってまで一円の得にもならないことなど、資本主義において間違ったことはしません。だから




そして利益とは、得た者がいれば奪われた者も居ます。



　そこで私は利用者（小説の執筆者や読者）の利益を追求したアプリを作りました。それがJavelです。



社会体制である営利目的は資本主義において、主役であるはずの利用者を害するなど、本末転倒でしょう。


　Javelはオープンソースです。GitHubにてソースコードを公開しており、永久無料で誰でも使えて自由に改変・再配布できます。ライセンスは??です。





　小説閲覧スマホアプリは利用できない場合が多いです。特定のOSに特化した専用サイトからしかダウンロードできなかったり、古い機種はOSアップロードもできずサイトにアクセスしても正しく表示できずアプリのダウンロードさえできなかったり。私はあらゆるデバイスで誰もが利用できるクロスプラットフォームなアプリが欲しかったのです。故にブラウザアプリで実装しました。

　小説投稿サイトの利用にはアカウント必須で、メールアドレスが必要で、それにはSNS認証や生体認証といった個人情報の提供が事実上必須になっている状況です(2025年現在)。小説を書くのに不要なはずの個人情報提供は社会的リスクを無駄に増大させます。これを回避したくてJavelを作りました。

　また、毎回ログインしたり、利用規約やサービス変更・改悪の対応という煩わしさから解放したり、五輪汚職や性犯罪、反社活動する企業へ加担させられるなどといった自分の意志に反することをせずとも簡単に小説を執筆＆読書できる環境が欲しかったのです。

　Javelはオープンソースです。GitHubにてソースコードを公開しており、永久無料で誰でも使えて自由に改変・再配布できます。ライセンスは??です。

　同志は自分のやりたいことを自分で改善します。そこに誇りと自信をもち生きがい


　自分の理想を自分で実現する。自分にできないことは将来の人々に託す。きっとこれから先、もっと善くなっていくに違いない。



　資本主義により営利目的が先鋭化し、本来の創作活動に

　Javelは本来の目的である小説の執筆＆読書だけに集中したい。


　Javelはアカウント不要です。既存の小説投稿サイトはアカウント必須で、メールアドレスが必要で、それにはSNS認証や生体認証といった個人情報の提供が事実上必須になっている状況です(2025年現在)。小説を書くのに不要なはずの個人情報提供は社会的リスクを無駄に増大させます。これを回避したくてJavelを作りました。また、毎回ログインしたり、利用規約やサービス変更・改悪の対応という煩わしさから解放したり、五輪汚職や反社活動する企業へ加担させられるなどといった自分の意志に反することをせずとも執筆できるようにしました。本来の目的である小説の執筆＆読書だけに集中したい。

　Javelはオープンソースです。GitHubにてソースコードを公開しており、永久無料で誰でも使えて自由に改変・再配布できます。ライセンスは??です。




　
記法は極めて単純です。見出し、段落、ルビ、傍点が書けます。
本のように文字が見きれぬようなページ単位で分割された

```

　Javelはサイトを選びません。

　ネット接続する必要はありません。Javelのダウンロードができれば、あとはネット接続不要です。またJavel自体がブラウザアプリなので、そのファイル一式をSDカードなどに保存し、他のデバイスにコピーすれば使えます。

　ネット接続する必要はありません。小説の執筆や読書をするのにネット接続は不要です。執筆した原稿と、それを閲覧するアプリがあれば十分です。それをダウンロードすれば、あとはオフラインで閲覧できるはずです。

　無駄なパケット通信や契約などしたくありません。でもデータのやり取りはしたいです。だから単純なテキストファイルだけで閲覧できるようにしました。また、BlueTooth通信でファイルの授受ができるようにしもしました。

　小説を執筆＆閲覧するのに個人情報を提供する技術的な必要性や合理性はありません。あくまで提供側がその個人情報をもとに広告戦略などを打ち出して営利目的を達成したいだけです。それは作家や読者の目的と異なるズレた行為です。なのに、そのために利用者は負担《コスト》と危険《リスク》を強いられます。


# パフォーマンスと可読性のトレードオフ

　Webアプリはインタプリタであり、バイナリではなくソースコードである。このためソースコード量がそのままパフォーマンスに影響する。コードが長いと読込に時間がかかりパフォーマンスが下がる。コードを短縮すればコードの可読性が下がりコードの変更や再利用がしづらくなる。これらを両立させるためには、それぞれのパターンのコードファイルを用意する必要がある。

<!-- more -->

# パフォーマンス向上する方法

名称|概要
----|----
圧縮|Compression Streams APIによりGZIP圧縮すること
短縮|ミニファイ(Minify)と呼ばれる手法でソースコードを短縮すること

# 用意するコードのパターン

　ブラウザからコードをDLするには単一ファイルにまとめたほうが良い。また、パフォーマンス重視と可読性重視の二種類を用意したい。すると次の五パターンがありうる。

圧縮|短縮|数
----|----|--
○|○|一|index.htmlにCSSやJSも含め、コードは短縮され、DLファイルはGZIP形式。
○|○|複|index.htmlの他にstyle.cssやmain.jsなど複数ファイルに分割しており、コードは短縮され、DLファイルはGZIP形式。
○|×|一|index.htmlにCSSやJSも含め、コードは短縮されず、DLファイルはGZIP形式。
○|×|複|index.htmlの他にstyle.cssやmain.jsなど複数ファイルに分割しており、コードは短縮されず、DLファイルはGZIP形式。
×|×|一|index.htmlにCSSやJSも含め、コードは短縮され、DLファイルはHTML形式。

# Javelで読書用HTML本を生成する

* 最優先する項目は
	* パフォーマンス（圧縮○短縮○単一）
	* コードの可読・再利用性（圧縮○短縮○複数）

　このときも上記五パターンを用意する。ユーザの選択肢としては以下。尚、複数かつ圧縮は両立不可。DLファイルは必ず一つであること。

* ソースコードのファイルは[単一|複数]にする
* ソースコードを短縮[する|しない]
* DLファイルを圧縮[する|しない]

　種類毎に分類すると次のようになる。基本的にフォントや画像は含めない。それらを含めたバイナリファイルとして専用アプリで表示できるアプリは欲しいが、ブラウザアプリでは不可能のため断念する。

* index.html
* style.css
* main.js
* manuscript.javel
* logo.svg
* font.otp

